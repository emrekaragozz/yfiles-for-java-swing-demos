<html>
<head>
  <link rel="stylesheet" href="../../resources/help.css"/>
</head>
<body class="demo-description">
<h2>Step 7: Hit Test</h2>

<p>
  Implement a proper hit detection for mouse clicks and marquee selection. This is done by
  overriding the methods <code>isHit()</code> and <code>isInBox()</code> of class <code>AbstractNodeStyle</code>.
</p>

<p>
  <code>isHit()</code> is used for mouse click detection. It should return true if the tested point is inside the node.
  <code>isHit()</code> should take the <a href="http://docs.yworks.com/yfilesjava/doc/api/#/api/com.yworks.yfiles.view.ICanvasContext%23ICanvasContext-property-HitTestRadius">imprecision radius specified in the ICanvasContext</a>
  into account.
</p>

<p>
  <code>isInBox()</code> is used for marquee detection. It should return true if the node intersects with the box to
  test or lies completely inside. Also it should be true if the tested box lies completely inside the node.
</p>

<h3>Things to Try</h3>

<ul>
  <li>
    Take a look at <code>isHit()</code> and <code>isInBox()</code>.
  </li>
  <li>
    Click inside/outside a node to see when it gets selected. Click near the node to watch the effects of the
    HitTestRadius. Zooming out makes the HitTestRadius bigger.
  </li>
  <li>
    Drag a marquee box to select a node. If you drag it inside the surrounding box of a node you will see the node
    doesn't get selected. Drag it near the node to watch the effects of the HitTestRadius.
  </li>
  <li>
    Comment in the first line in <code>isHit()</code> and <code>isInBox()</code> so the implementations in the base
    class are called and do the same thing again. The elliptical shape of the node won't be respected but the node
    will be treated as if it was rectangular.
  </li>
  <li>
    Please note that <code>isHit()</code> is just implemented for the sake of completeness and performance here. The
    base class implementation takes the result of <code>getOutline()</code> for hit testing which calculates exactly
    the same thing, with the difference that <code>getOutline()</code> needs to build a <code>GeneralPath</code> first
    which is more expensive than an efficient implementation as shown in <code>isHit()</code>.
    If <code>getOutline()</code> is implemented correctly, <code>isHit()</code> will automatically return the correct
    result.
  </li>
</ul>

<h3>Left to Do</h3>

<ul>
  <li>
    Implement <code>getBounds()</code>, so the drop shadow will be included in the bounds of the node.
  </li>
  <li>
    Draw edges from nodes to their labels.
  </li>
  <li>
    Create a custom label style.
  </li>
  <li>
    Create a custom edge style.
  </li>
  <li>
    Create a custom port style for nodes.
  </li>
</ul>
<br/>
<h3>Relevant Chapters in the Developers Guide:</h3>
<ul>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/dguide/customizing_styles">Customizing Styles</a></li>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/dguide/custom-styles_basic">Basic Custom Style Implementation</a></li>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/dguide/custom-styles_advanced-functionality%23__api_name_text_ihittestable">Customizing Styles: IHitTestable</a></li>
</ul>
<h3>Relevant API:</h3>
<ul>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/api/com.yworks.yfiles.graph.styles.AbstractNodeStyle%23AbstractNodeStyle-method-isHit">AbstractNodeStyle#isHit</a></li>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/api/com.yworks.yfiles.graph.styles.AbstractNodeStyle%23AbstractNodeStyle-method-isInBox">AbstractNodeStyle#isInBox</a></li>
</ul>
</body>
</html>