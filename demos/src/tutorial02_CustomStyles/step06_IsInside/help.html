<html>
<head>
  <link rel="stylesheet" href="../../resources/help.css"/>
</head>
<body class="demo-description">
<h2>Step 6: IsInside</h2>

<p>
  Crop edges properly at a node's visual bounds and how to determine whether or not
  a location, e.g. of a port, is inside said node's visual bounds. This is done by overriding the methods
  <code>getOutline()</code> and <code>isInside()</code> of class <code>AbstractNodeStyle</code>.
</p>

<h3>Things to Try</h3>

<ul>
  <li>
    Take a look at <code>isInside()</code> and <code>getOutline()</code>.
  </li>
  <li>
    Move an edge around a node. It follows the outline of the node.
  </li>
  <li>
    Now comment in the first line in <code>getOutline()</code> so the implementation in the base class is called and
    do the same thing again. Now the edge will follow a rectangle enclosing the node.
  </li>
  <li>
    Select an incoming edge and drag its port outside the node. See how the behaviour of the edge changes when the
    port enters the node. That is an effect of the implementation of <code>isInside()</code>.
  </li>
  <li>
    Now comment in the first line in <code>isInside()</code> so the implementation in the base class is called and do
    the same thing again. Now the enclosing rectangle is used for port behaviour calculation.
  </li>
  <li>
    Please note that <code>isInside()</code> as well as <code>getIntersection()</code>, which isn't demonstrated here,
    are just used to improve performance. If not implemented, <code>getOutline()</code> will be used to calculate
    exactly the same thing, with the difference that <code>getOutline()</code> needs to build a
    <a href="http://docs.yworks.com/yfilesjava/doc/api/#/api/com.yworks.yfiles.geometry.GeneralPath">GeneralPath</a> first which is more expensive than an effective implementation as shown in
    <code>isInside()</code>.
  </li>
</ul>

<h3>Left to Do</h3>

<ul>
  <li>
    Implement hit test, so a node won't get selected when clicking in the bounding box but not in the node itself
    (this works already in this step, but can be implemented explicitly for performance reasons).
  </li>
  <li>
    Implement <code>getBounds()</code>, so the drop shadow will be included in the bounds of the node.
  </li>
  <li>
    Draw edges from nodes to their labels.
  </li>
  <li>
    Create a custom label style.
  </li>
  <li>
    Create a custom edge style.
  </li>
  <li>
    Create a custom port style for nodes.
  </li>
</ul>
<br/>
<h3>Relevant Chapters in the Developers Guide:</h3>
<ul>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/dguide/customizing_styles">Customizing Styles</a></li>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/dguide/custom-styles_basic">Basic Custom Style Implementation</a></li>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/dguide/custom-styles_advanced-functionality%23__api_name_text_ishapegeometry">Customizing Styles: IShapeGeometry</a></li>
</ul>
<h3>Relevant API:</h3>
<ul>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/api/com.yworks.yfiles.graph.styles.AbstractNodeStyle%23AbstractNodeStyle-method-getOutline">AbstractNodeStyle#getOutline</a></li>
  <li><a href="http://docs.yworks.com/yfilesjava/doc/api/#/api/com.yworks.yfiles.graph.styles.AbstractNodeStyle%23AbstractNodeStyle-method-isInside">AbstractNodeStyle#isInside</a></li>
</ul>
</body>
</html>